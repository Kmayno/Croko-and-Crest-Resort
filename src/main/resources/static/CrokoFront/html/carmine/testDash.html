<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Dashboard Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-100 flex">

<!-- Sidebar -->
<aside class="w-72 bg-green-700 text-white flex flex-col">
    <div class="p-6 flex items-center space-x-3 border-b border-green-800">
        <img src="CROCOLOGO20.png" alt="Logo" class="h-12 w-auto object-contain">
        <h1 class="text-lg font-bold">Dashboard</h1>
    </div>

    <nav class="flex-1 p-4 space-y-2" id="sidebarNav">
        <button data-section="dashboard" class="menuBtn w-full text-left py-2 px-3 rounded hover:bg-green-800"> Home</button>
        <button data-section="admins" class="menuBtn w-full text-left py-2 px-3 rounded hover:bg-green-800"> Gestione Admin</button>
        <button data-section="prenotazioni" class="menuBtn w-full text-left py-2 px-3 rounded hover:bg-green-800"> Gestione Prenotazioni</button>
        <button data-section="camere" class="menuBtn w-full text-left py-2 px-3 rounded hover:bg-green-800"> Gestione Camere</button>
    </nav>

    <div class="p-4 border-t border-green-800">
        <button id="logoutBtn" class="w-full bg-green-600 py-2 rounded-lg hover:bg-green-700 transition">Logout</button>
    </div>
</aside>

<!-- Main -->
<main class="flex-1 p-6">
    <!-- Banner per errori / debug -->
    <div id="topBanner" class="hidden mb-4"></div>

    <h2 id="welcome" class="text-lg text-gray-700 mb-6"></h2>

    <!-- Section: Home -->
    <section id="section-dashboard" class="hidden">
        <h2 class="text-2xl font-bold mb-4">Benvenuto!</h2>
        <p class="text-gray-700">Seleziona una voce dal menu a sinistra per gestire admins o prenotazioni.</p>
    </section>

    <!-- Section: Admins -->
    <section id="section-admins" class="hidden">
        <div class="flex items-center justify-between">
            <h2 class="text-xl font-bold mb-4">Gestione Admin</h2>
            <button id="refreshAdmins" class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700">Aggiorna</button>
        </div>
        <div id="result" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-4"></div>
    </section>

    <!-- Section: Prenotazioni -->
    <section id="section-prenotazioni" class="hidden">
        <div class="flex items-center justify-between">
            <h2 class="text-xl font-bold mb-4">Prenotazioni Clienti</h2>
            <button id="refreshPren" class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700">Aggiorna</button>
        </div>
        <div id="prenotazioniResult" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-4"></div>
    </section>
    <!-- Sezione Camere -->
    <div id="section-camere" class="hidden p-6">
        <h2 class="text-lg text-gray-700 mb-6">Gestione Camere</h2>
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold">Lista Camere</h2>
            <button id="refreshCamere" class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700">Aggiorna</button>
        </div>
        <div id="camereResult" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8"></div>
    </div>
</main>



<!-- MODAL elimina admin -->
<div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex justify-center items-center z-50">
    <div class="bg-white rounded-2xl p-6 w-96 relative shadow-lg">
        <h3 class="text-lg font-bold mb-4">Conferma eliminazione</h3>
        <p id="modalText" class="mb-6">Sei sicuro di voler eliminare questo admin?</p>
        <div class="flex justify-end space-x-3">
            <button id="cancelDelete" class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">Annulla</button>
            <button id="confirmDelete" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">Elimina</button>
        </div>
        <button id="closeModal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
    </div>
</div>

<!-- MODAL modifica admin -->
<div id="editModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex justify-center items-center z-50">
    <div class="bg-white rounded-2xl p-6 w-96 relative shadow-lg">
        <h3 class="text-lg font-bold mb-4">Modifica Admin</h3>
        <form id="editAdminForm" class="space-y-4">
            <input type="hidden" id="editId" name="id">
            <div>
                <label for="editNome" class="block text-sm font-medium text-gray-700">Nome</label>
                <input type="text" id="editNome" name="nome" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm">
            </div>
            <div>
                <label for="editEmail" class="block text-sm font-medium text-gray-700">Email</label>
                <input type="email" id="editEmail" name="email" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm">
            </div>
            <div>
                <label for="editPassword" class="block text-sm font-medium text-gray-700">Password (lascia vuoto per non cambiare)</label>
                <input type="password" id="editPassword" name="password" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm">
            </div>
        </form>

        <div class="flex justify-end space-x-3 mt-6">
            <button id="cancelEdit" class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">Annulla</button>
            <button type="submit" form="editAdminForm" id="confirmEdit" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Salva</button>
        </div>

        <button id="closeEditModal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
    </div>
</div>

<!-- MODAL modifica camera -->
<!-- MODAL modifica camera -->
<div id="editCameraModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex justify-center items-center z-50">
    <div class="bg-white rounded-2xl p-6 w-96 relative shadow-lg">
        <h3 class="text-lg font-bold mb-4">Modifica Camera</h3>
        <form id="editCameraForm" class="space-y-4">
            <input type="hidden" id="editCameraId" name="id">
            <div>
                <label for="editNumeroStanza" class="block text-sm font-medium text-gray-700">Numero Stanza</label>
                <input type="number" id="editNumeroStanza" name="numeroStanza" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm" required>
            </div>
            <div>
                <label for="editTipoCamera" class="block text-sm font-medium text-gray-700">Tipo Camera</label>
                <input type="text" id="editTipoCamera" name="tipoCamera" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm" required>
            </div>
            <div>
                <label for="editDescrizione" class="block text-sm font-medium text-gray-700">Descrizione</label>
                <textarea id="editDescrizione" name="descrizione" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm"></textarea>
            </div>
            <div>
                <label for="editPrezzo" class="block text-sm font-medium text-gray-700">Prezzo</label>
                <input type="number" id="editPrezzo" name="prezzoBaseNotte" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm" required>
            </div>
            <div class="flex items-center space-x-2">
                <input type="checkbox" id="editDisponibile" name="disponibile" class="h-4 w-4">
                <label for="editDisponibile" class="text-gray-700">Disponibile</label>
            </div>
            <div class="flex justify-end space-x-3 mt-4">
                <button type="button" id="cancelEditCamera" class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">Annulla</button>
                <button type="submit" id="confirmEditCamera" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Salva</button>
            </div>
        </form>
        <button id="closeEditCameraModal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
    </div>
</div>

<!-- MODAL elimina prenotazione -->
<div id="deletePrenModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex justify-center items-center z-50">
    <div class="bg-white rounded-2xl p-6 w-96 relative shadow-lg">
        <h3 class="text-lg font-bold mb-4">Conferma eliminazione</h3>
        <p id="prenModalText" class="mb-6">Sei sicuro di voler eliminare questa prenotazione?</p>
        <div class="flex justify-end space-x-3">
            <button id="cancelPrenDelete" class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">Annulla</button>
            <button id="confirmPrenDelete" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">Elimina</button>
        </div>
        <button id="closePrenModal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
    </div>
</div>

<script>
    /*
      Dashboard single-file
      - Uso: salva come .html e apri nel browser.
      - Se non hai token la pagina non reindirizza: mostra banner con pulsante "Simula login" (utile per debug).
      - Controlla console per dettagli (CORS/401).
    */
    document.addEventListener('DOMContentLoaded', () => {
        console.log('Dashboard caricata');

        const token = localStorage.getItem("token");
        const nome = localStorage.getItem("adminNome");
        const topBanner = document.getElementById('topBanner');
        const welcomeEl = document.getElementById('welcome');
        welcomeEl.textContent = `Ciao ${nome || 'Admin'}, benvenuto!`;

        // Sezioni
        const sections = {
            dashboard: document.getElementById('section-dashboard'),
            admins: document.getElementById('section-admins'),
            prenotazioni: document.getElementById('section-prenotazioni'),
            camere: document.getElementById('section-camere')
        };

        // Sidebar menu
        document.querySelectorAll('.menuBtn').forEach(btn => {
            btn.addEventListener('click', () => showSection(btn.getAttribute('data-section')));
        });

        function showSection(key) {
            Object.values(sections).forEach(s => s.classList.add('hidden'));
            if (sections[key]) sections[key].classList.remove('hidden');
            if (key === 'admins') loadAdmins();
            if (key === 'prenotazioni') loadPrenotazioni();
            if (key === 'camere') loadCamere();
        }

        // Default
        showSection('admins');

        // Logout
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('token');
            localStorage.removeItem('adminNome');
            window.location.href = 'AdminLogin.html';
        });

        // ===== ADMIN LOGIC =====
        let adminToEdit = null;
        let adminToDelete = null;

        document.getElementById('refreshAdmins').addEventListener('click', loadAdmins);

        function loadAdmins() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `<div class="col-span-full text-gray-500">Caricamento...</div>`;
            const tokenLocal = localStorage.getItem('token');

            if (!tokenLocal) return renderAdmins(sampleAdmins());

            fetch('http://localhost:8080/api/admin-login/getAllAdmin', {
                method: 'GET',
                headers: { 'Authorization': `Bearer ${tokenLocal}`, 'Content-Type': 'application/json' }
            })
                .then(res => res.ok ? res.json() : Promise.reject('Errore caricamento admins'))
                .then(admins => renderAdmins(admins))
                .catch(err => {
                    console.error(err);
                    renderAdmins(sampleAdmins());
                    showBanner('Errore caricamento admins: ' + err, 'red');
                });
        }

        function renderAdmins(admins) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '';
            admins.forEach(admin => {
                const card = document.createElement('div');
                card.className = 'bg-white shadow rounded-2xl p-6 hover:shadow-lg transition relative';
                card.innerHTML = `
        <h3 class="text-lg font-bold text-gray-800 mb-2">Admin: ${escapeHtml(admin.nome)}</h3>
        <p class="text-gray-600 mb-4"><span class="font-medium">Email:</span> ${escapeHtml(admin.email)}</p>
        <div class="flex space-x-2">
          <button class="editBtn bg-green-700 hover:bg-green-600 text-white px-3 py-1 rounded-lg">Modifica</button>
          <button class="deleteBtn bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg">Elimina</button>
        </div>
      `;
                card.querySelector('.editBtn').addEventListener('click', () => openEditAdmin(admin, card));
                card.querySelector('.deleteBtn').addEventListener('click', () => openDeleteAdmin(admin, card));
                resultDiv.appendChild(card);
            });
        }

        function openEditAdmin(admin, card) {
            adminToEdit = { ...admin, card };
            document.getElementById('editId').value = admin.idAdmin;
            document.getElementById('editNome').value = admin.nome;
            document.getElementById('editEmail').value = admin.email;
            document.getElementById('editPassword').value = '';
            document.getElementById('editModal').classList.remove('hidden');
        }

        function closeEditAdmin() {
            adminToEdit = null;
            document.getElementById('editModal').classList.add('hidden');
        }

        document.getElementById('cancelEdit').addEventListener('click', closeEditAdmin);
        document.getElementById('closeEditModal').addEventListener('click', closeEditAdmin);

        document.getElementById('editAdminForm').addEventListener('submit', e => {
            e.preventDefault();
            if (!adminToEdit) return;
            const updated = {
                idAdmin: document.getElementById('editId').value,
                nome: document.getElementById('editNome').value,
                email: document.getElementById('editEmail').value,
                passwordAdmin: document.getElementById('editPassword').value
            };
            fetch('http://localhost:8080/api/admin-login/update', {
                method: 'PUT',
                headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' },
                body: JSON.stringify(updated)
            })
                .then(res => res.ok ? res.json() : Promise.reject('Errore modifica admin'))
                .then(() => {
                    closeEditAdmin();
                    loadAdmins();
                    showBanner('Admin aggiornato', 'green');
                })
                .catch(err => showBanner(err, 'red'));
        });

        function openDeleteAdmin(admin, card) {
            adminToDelete = { ...admin, card };
            document.getElementById('modalText').textContent = `Sei sicuro di voler eliminare ${admin.nome}?`;
            document.getElementById('deleteModal').classList.remove('hidden');
        }

        function closeDeleteAdmin() {
            adminToDelete = null;
            document.getElementById('deleteModal').classList.add('hidden');
        }

        document.getElementById('cancelDelete').addEventListener('click', closeDeleteAdmin);
        document.getElementById('closeModal').addEventListener('click', closeDeleteAdmin);

        document.getElementById('confirmDelete').addEventListener('click', () => {
            if (!adminToDelete) return;
            fetch(`http://localhost:8080/api/admin-login/delete/${adminToDelete.idAdmin}`, {
                method: 'DELETE',
                headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' }
            })
                .then(res => res.ok ? res : Promise.reject('Errore eliminazione admin'))
                .then(() => {
                    adminToDelete.card.remove();
                    closeDeleteAdmin();
                    showBanner('Admin eliminato', 'green');
                })
                .catch(err => showBanner(err, 'red'));
        });

        // ===== PRENOTAZIONI =====
        let prenToDelete = null;
        document.getElementById('refreshPren').addEventListener('click', loadPrenotazioni);

        function loadPrenotazioni() {
            const prenDiv = document.getElementById('prenotazioniResult');
            prenDiv.innerHTML = `<div class="col-span-full text-gray-500">Caricamento...</div>`;
            fetch('http://localhost:8080/api/prenotazioni', {
                headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' }
            })
                .then(res => res.ok ? res.json() : Promise.reject('Errore caricamento prenotazioni'))
                .then(pren => renderPrenotazioni(pren))
                .catch(err => {
                    console.error(err);
                    renderPrenotazioni(samplePrenotazioni());
                    showBanner('Errore caricamento prenotazioni', 'red');
                });
        }

        function renderPrenotazioni(prenotazioni) {
            const prenDiv = document.getElementById('prenotazioniResult');
            prenDiv.innerHTML = '';
            prenotazioni.forEach(pr => {
                const card = document.createElement('div');
                card.className = 'bg-white shadow rounded-2xl p-6 hover:shadow-lg transition';
                card.innerHTML = `
        <h3 class="text-lg font-bold text-gray-800 mb-2">Prenotazione #${pr.idPrenotazione}</h3>
        <p class="text-gray-600"><span class="font-medium">Nome cliente:</span> ${pr.nomeCliente}</p>
        <p class="text-gray-600"><span class="font-medium">Check-in:</span> ${pr.dataInizio}</p>
        <p class="text-gray-600"><span class="font-medium">Check-out:</span> ${pr.dataFine}</p>
        <p class="text-gray-600"><span class="font-medium">Stanza:</span> ${pr.numeroStanza}</p>
        <p class="text-gray-600"><span class="font-medium">Prezzo:</span> ${pr.prezzoTotale}</p>
        <div class="mt-4 flex justify-end">
          <button class="deletePrenBtn bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg">Elimina</button>
        </div>
      `;
                card.querySelector('.deletePrenBtn').addEventListener('click', () => openDeletePren(pr, card));
                prenDiv.appendChild(card);
            });
        }

        function openDeletePren(pren, card) {
            prenToDelete = { ...pren, card };
            document.getElementById('prenModalText').textContent = `Sei sicuro di voler eliminare la prenotazione #${pren.idPrenotazione}?`;
            document.getElementById('deletePrenModal').classList.remove('hidden');
        }

        function closeDeletePren() {
            prenToDelete = null;
            document.getElementById('deletePrenModal').classList.add('hidden');
        }

        document.getElementById('cancelPrenDelete').addEventListener('click', closeDeletePren);
        document.getElementById('closePrenModal').addEventListener('click', closeDeletePren);

        document.getElementById('confirmPrenDelete').addEventListener('click', () => {
            if (!prenToDelete) return;
            fetch(`http://localhost:8080/api/prenotazioni/${prenToDelete.idPrenotazione}`, {
                method: 'DELETE',
                headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' }
            })
                .then(res => res.ok ? res : Promise.reject('Errore eliminazione prenotazione'))
                .then(() => {
                    prenToDelete.card.remove();
                    closeDeletePren();
                    showBanner('Prenotazione eliminata', 'green');
                })
                .catch(err => showBanner(err, 'red'));
        });

        // ===== CAMERE =====
        let cameraToEdit = null;

        document.getElementById('refreshCamere').addEventListener('click', loadCamere);

        function loadCamere() {
            const camereDiv = document.getElementById('camereResult');
            camereDiv.innerHTML = `<div class="col-span-full text-gray-500">Caricamento...</div>`;
            fetch('http://localhost:8080/api/camere/getAllRooms', {
                headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' }
            })
                .then(res => res.ok ? res.json() : Promise.reject('Errore caricamento camere'))
                .then(camere => renderCamere(camere))
                .catch(err => {
                    console.error(err);
                    renderCamere(sampleCamere());
                    showBanner('Errore caricamento camere', 'red');
                });
        }

        function renderCamere(camere) {
            const camereDiv = document.getElementById('camereResult');
            camereDiv.innerHTML = '';

            camere.forEach(c => {
                const card = document.createElement('div');
                card.className = 'bg-white shadow rounded-2xl p-6 hover:shadow-lg transition';
                card.innerHTML = `
            <h3 class="text-lg font-bold text-gray-800 mb-2">Camera #${c.numeroStanza}</h3>
            <p class="text-gray-600"><span class="font-medium">Tipo:</span> ${c.tipoCamera || c.tipo}</p>
            <p class="text-gray-600"><span class="font-medium">Descrizione:</span> ${c.descrizione || ''}</p>
            <p class="text-gray-600"><span class="font-medium">Prezzo:</span> €${c.prezzoBaseNotte || c.prezzo || 0}</p>
            <p class="text-gray-600"><span class="font-medium">Disponibile:</span> ${c.disponibile ? 'si' : 'no'}</p>
            <div class="mt-4 flex justify-end space-x-2">
                <button class="editCameraBtn bg-green-700 hover:bg-green-600 text-white px-3 py-1 rounded-lg">Modifica</button>
                <button class="deleteCameraBtn bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg">Elimina</button>
            </div>
        `;

                // Pulsante Modifica → apre modal
                card.querySelector('.editCameraBtn').addEventListener('click', () => openEditCamera(c));

                // Pulsante Elimina → conferma ed elimina
                card.querySelector('.deleteCameraBtn').addEventListener('click', () => {
                    if (!confirm(`Vuoi eliminare la camera #${c.numeroStanza}?`)) return;
                    const token = localStorage.getItem('token');
                    fetch(`http://localhost:8080/api/camere/${c.idCamera}`, {
                        method: 'DELETE',
                        headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' }
                    })
                        .then(res => res.ok ? res : Promise.reject('Errore eliminazione camera'))
                        .then(() => {
                            showBanner('Camera eliminata', 'green');
                            loadCamere(); // ricarica la lista
                        })
                        .catch(err => showBanner(err, 'red'));
                });

                camereDiv.appendChild(card);
            });
        }




        function openEditCamera(cam) {
            cameraToEdit = { ...cam };
            document.getElementById('editCameraId').value = cam.idCamera;
            document.getElementById('editNumeroStanza').value = cam.numeroStanza;
            document.getElementById('editTipoCamera').value = cam.tipo || cam.tipoCamera || '';
            document.getElementById('editDescrizione').value = cam.descrizione || '';
            document.getElementById('editPrezzo').value = cam.prezzoBaseNotte || cam.prezzo || 0;
            document.getElementById('editDisponibile').checked = cam.disponibile;
            document.getElementById('editCameraModal').classList.remove('hidden');
        }

        function closeEditCamera() {
            cameraToEdit = null;
            document.getElementById('editCameraModal').classList.add('hidden');
        }

        document.getElementById('cancelEditCamera').addEventListener('click', closeEditCamera);
        document.getElementById('closeEditCameraModal').addEventListener('click', closeEditCamera);

        document.getElementById('editCameraForm').addEventListener('submit', (e) => {
            e.preventDefault();
            if (!cameraToEdit) return;

            const token = localStorage.getItem('token');
            const updated = {
                numeroStanza: Number(document.getElementById('editNumeroStanza').value),
                tipoCamera: document.getElementById('editTipoCamera').value,
                descrizione: document.getElementById('editDescrizione').value,
                prezzoBaseNotte: Number(document.getElementById('editPrezzo').value),
                disponibile: document.getElementById('editDisponibile').checked
            };

            fetch(`http://localhost:8080/api/camere/${cameraToEdit.idCamera}`, {
                method: 'PUT',
                headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' },
                body: JSON.stringify(updated)
            })
                .then(res => res.ok ? res.text() : Promise.reject('Errore modifica camera'))
                .then(msg => {
                    closeEditCamera();
                    loadCamere(); // ricarica la lista delle camere
                    showBanner(msg ||'Camera aggiornata', 'green');
                })
                .catch(err => showBanner(err, 'red'));
        });

        function deleteCamera(id) {
            if (!confirm(`Vuoi eliminare la camera #${id}?`)) return;
            fetch(`http://localhost:8080/api/camere/${id}`, {
                method: 'DELETE',
                headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' }
            })
                .then(res => res.ok ? res : Promise.reject('Errore eliminazione camera'))
                .then(() => {
                    loadCamere();
                    showBanner('Camera eliminata', 'green');
                })
                .catch(err => showBanner(err, 'red'));
        }

        // ===== HELPERS =====
        function showBanner(msg, type = 'green') {
            const colors = {
                green: 'bg-green-50 border-green-400 text-green-800',
                red: 'bg-red-50 border-red-400 text-red-800',
                yellow: 'bg-yellow-50 border-yellow-400 text-yellow-800'
            };
            topBanner.className = `${colors[type]} mb-4 p-4 border-l-4 rounded`;
            topBanner.innerHTML = `<div>${escapeHtml(msg)}</div>`;
            setTimeout(() => topBanner.className = 'hidden', 6000);
        }

        function escapeHtml(str) {
            if (!str && str !== 0) return '';
            return String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[s]));
        }

        function sampleAdmins() {
            return [
                { idAdmin: 1, nome: 'Mario Rossi', email: 'mario.rossi@example.com' },
                { idAdmin: 2, nome: 'Luca Bianchi', email: 'luca.bianchi@example.com' },
                { idAdmin: 3, nome: 'Anna Verdi', email: 'anna.verdi@example.com' }
            ];
        }

        function samplePrenotazioni() {
            return [
                { idPrenotazione: 101, nomeCliente: 'Giulia', dataInizio: '2025-09-20', dataFine: '2025-09-24', numeroStanza: 12, prezzoTotale: '€200' },
                { idPrenotazione: 102, nomeCliente: 'Marco', dataInizio: '2025-10-05', dataFine: '2025-10-10', numeroStanza: 5, prezzoTotale: '€350' }
            ];
        }

        function sampleCamere() {
            return [
                { idCamera: 1, numeroStanza: 101, tipo: 'Singola', prezzo: 50, disponibile: true },
                { idCamera: 2, numeroStanza: 102, tipo: 'Doppia', prezzo: 80, disponibile: false }
            ];
        }

    });

</script>
</body>
</html>
